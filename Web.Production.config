<?xml version="1.0" encoding="utf-8"?>
<!-- Web.config transformation for production deployment -->
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">

  <!-- Transform connection string for production -->
  <connectionStrings>
    <add name="DefaultConnection" 
         connectionString="#{ConnectionString}#" 
         xdt:Transform="SetAttributes" 
         xdt:Locator="Match(name)"/>
  </connectionStrings>

  <!-- Set compilation debug to false for production -->
  <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" />
    
    <!-- Custom errors for production -->
    <customErrors mode="RemoteOnly" 
                  xdt:Transform="Replace">
      <error statusCode="404" redirect="~/Error/NotFound" />
      <error statusCode="500" redirect="~/Error/InternalError" />
    </customErrors>
    
    <!-- Disable trace in production -->
    <trace enabled="false" xdt:Transform="Replace" />
  </system.web>

  <!-- Add compression and other optimizations -->
  <system.webServer>
    <!-- Enable static content compression -->
    <urlCompression doStaticCompression="true" 
                   doDynamicCompression="true" 
                   xdt:Transform="Insert" />
    
    <!-- Add security headers -->
    <httpProtocol xdt:Transform="Insert">
      <customHeaders>
        <add name="X-Content-Type-Options" value="nosniff" />
        <add name="X-Frame-Options" value="DENY" />
        <add name="X-XSS-Protection" value="1; mode=block" />
        <add name="Strict-Transport-Security" value="max-age=31536000; includeSubDomains" />
      </customHeaders>
    </httpProtocol>
  </system.webServer>

</configuration>